(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1609:function(e,s,t){Promise.resolve().then(t.bind(t,5721))},5721:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ChatPage}});var a=t(7437),r=t(2265),l=t(9883),n=t(1827),i=t(2882),o=t(3966),d=t(3523),c=t(4280),m=t(7972),x=t(6020),g=t(7393);let h=[{id:"microsoft/DialoGPT-medium",name:"DialoGPT Medium",description:"Microsoft DialoGPT conversation model",parameters:"117M"},{id:"gpt2",name:"GPT-2",description:"OpenAI GPT-2 text generation model",parameters:"124M"}];function ChatPage(){let[e,s]=(0,r.useState)([]),[t,u]=(0,r.useState)(null),[p,f]=(0,r.useState)(""),[b,y]=(0,r.useState)(!1),[j,w]=(0,r.useState)(h[0]),[N,v]=(0,r.useState)(!1),[S,C]=(0,r.useState)(""),[D,k]=(0,r.useState)([]),M=(0,r.useRef)(null);(0,r.useEffect)(()=>{createNewChat()},[]),(0,r.useEffect)(()=>{if(""===S.trim())k(e);else{let s=e.filter(e=>e.title.toLowerCase().includes(S.toLowerCase())||e.messages.some(e=>e.content.toLowerCase().includes(S.toLowerCase())));k(s)}},[S,e]);let scrollToBottom=()=>{var e;null===(e=M.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{scrollToBottom()},[null==t?void 0:t.messages]);let createNewChat=()=>{let e={id:Date.now().toString(),title:"New Chat",messages:[],createdAt:new Date,lastMessage:new Date};s(s=>[e,...s]),u(e)},updateSessionTitle=(e,a)=>{let r=a.length>30?a.substring(0,30)+"...":a;s(s=>s.map(s=>s.id===e.id?{...s,title:r,lastMessage:new Date}:s)),(null==t?void 0:t.id)===e.id&&u(e=>e?{...e,title:r,lastMessage:new Date}:null)},selectSession=e=>{u(e)},regenerateLastMessage=async()=>{if(!t||t.messages.length<2)return;let e=t.messages,a=e[e.length-2];if("user"!==a.role)return;let r=e.slice(0,-1),l={...t,messages:r};u(l),s(e=>e.map(e=>e.id===t.id?l:e)),await generateResponse(a.content,r)},generateResponse=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];y(!0);try{let r=await fetch("".concat("https://api-text-generation.runpod.app","/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,model:j.id,max_length:150,temperature:.7})});if(!r.ok)throw Error("Failed to get response");let l=await r.json(),n={id:Date.now().toString(),content:l.output||l.response||"Sorry, I couldn't generate a response.",role:"assistant",timestamp:new Date,model:j.id};if(t){let e=[...a.length>0?a:t.messages,n],r={...t,messages:e,lastMessage:new Date};u(r),s(e=>e.map(e=>e.id===t.id?r:e))}}catch(a){console.error("Error:",a);let e={id:Date.now().toString(),content:"Sorry, I encountered an error. Please try again.",role:"assistant",timestamp:new Date};if(t){let a=[...t.messages,e],r={...t,messages:a};u(r),s(e=>e.map(e=>e.id===t.id?r:e))}}y(!1)},handleSendMessage=async()=>{if(!p.trim()||b||!t)return;let e={id:Date.now().toString(),content:p.trim(),role:"user",timestamp:new Date},a=[...t.messages,e],r={...t,messages:a};u(r),s(e=>e.map(e=>e.id===t.id?r:e)),0===t.messages.length&&updateSessionTitle(t,e.content),f(""),await generateResponse(e.content,a)};return(0,a.jsxs)("div",{className:"h-screen flex bg-white",children:[(0,a.jsxs)("div",{className:"w-72 bg-gray-900 text-white flex flex-col",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-700",children:(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"CHAT A.I+"})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("button",{onClick:createNewChat,className:"w-full flex items-center gap-3 px-4 py-3 bg-white text-black rounded-lg hover:bg-gray-100 transition-colors font-medium",children:[(0,a.jsx)(l.Z,{size:18}),"New chat"]})}),(0,a.jsx)("div",{className:"px-4 pb-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Z,{size:18,className:"absolute left-3 top-3 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search conversations...",value:S,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-800 text-white placeholder-gray-400 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Your conversations"}),(0,a.jsx)("div",{className:"space-y-2",children:D.map(e=>(0,a.jsx)("button",{onClick:()=>selectSession(e),className:"w-full text-left p-3 rounded-lg transition-all duration-200 ".concat((null==t?void 0:t.id)===e.id?"bg-gray-700 border border-gray-600":"hover:bg-gray-800 border border-transparent"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(i.Z,{size:16,className:"text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white truncate",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.lastMessage.toLocaleDateString()})]})]})},e.id))})]}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-700",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>v(!N),className:"w-full flex items-center justify-between p-4 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors border border-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(o.Z,{size:18,className:"text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:j.name}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:j.parameters})]})]}),(0,a.jsx)(d.Z,{size:18,className:"text-gray-400"})]}),N&&(0,a.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-gray-800 border border-gray-600 rounded-lg shadow-xl z-20",children:h.map(e=>(0,a.jsxs)("button",{onClick:()=>{w(e),v(!1)},className:"w-full text-left p-4 hover:bg-gray-700 first:rounded-t-lg last:rounded-b-lg transition-colors",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:e.description})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col bg-white",children:[t&&t.messages.length>0&&(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:t.title}),t.messages.length>1&&(0,a.jsxs)("button",{onClick:regenerateLastMessage,disabled:b,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[(0,a.jsx)(c.Z,{size:16}),"Regenerate"]})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:t&&0!==t.messages.length?(0,a.jsxs)("div",{className:"p-6 space-y-8 max-w-4xl mx-auto w-full",children:[t.messages.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex gap-4 message-bubble ".concat("user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-900 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(o.Z,{size:20,className:"text-white"})}),(0,a.jsxs)("div",{className:"max-w-2xl p-4 rounded-2xl ".concat("user"===e.role?"bg-gray-900 text-white":"bg-gray-100 text-gray-900"),children:["user"===e.role?(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}):(0,a.jsx)(g.UG,{className:"prose prose-sm max-w-none prose-headings:text-gray-900 prose-p:text-gray-700",children:e.content}),(0,a.jsxs)("div",{className:"text-xs mt-3 ".concat("user"===e.role?"text-gray-300":"text-gray-500"),children:[e.timestamp.toLocaleTimeString(),e.model&&(0,a.jsxs)("span",{className:"ml-2",children:["• ",null===(s=h.find(s=>s.id===e.model))||void 0===s?void 0:s.name]})]})]}),"user"===e.role&&(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(m.Z,{size:20,className:"text-white"})})]},e.id)}),b&&(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-900 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(o.Z,{size:20,className:"text-white"})}),(0,a.jsx)("div",{className:"bg-gray-100 rounded-2xl p-4",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),(0,a.jsx)("div",{ref:M})]}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto px-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-900 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(o.Z,{size:32,className:"text-white"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"What's in your mind?"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8 text-lg",children:"Start a conversation with our AI assistant. Ask questions, get help, or just chat!"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 bg-white p-4 rounded-lg border border-gray-200",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Model:"})," ",j.name]}),(0,a.jsx)("p",{children:j.description})]})]})})}),(0,a.jsx)("div",{className:"p-6 bg-white border-t border-gray-200",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{value:p,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSendMessage())},placeholder:"What's in your mind?",className:"w-full p-4 pr-14 border-2 border-gray-200 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent text-gray-900 placeholder-gray-500",rows:1,style:{minHeight:"56px",maxHeight:"160px"}}),(0,a.jsx)("button",{onClick:handleSendMessage,disabled:!p.trim()||b,className:"absolute right-2 bottom-2 p-3 bg-gray-900 text-white rounded-xl hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)(x.Z,{size:18})})]}),(0,a.jsxs)("div",{className:"mt-3 text-xs text-gray-500 text-center",children:["Using ",j.name," • Press Enter to send, Shift+Enter for new line"]})]})})]})]})}}},function(e){e.O(0,[781,971,472,744],function(){return e(e.s=1609)}),_N_E=e.O()}]);