(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1609:function(e,t,s){Promise.resolve().then(s.bind(s,5721))},5721:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ChatPage}});var a=s(7437),r=s(2265),n=s(9883),l=s(1827),i=s(2882),o=s(3966),c=s(3523),d=s(4280),m=s(7972),h=s(6020),u=s(7393);let g=[{id:"L3.2-8X3B",name:"Llama-3.2-8X3B",description:"Dark Champion Instruct MOE (18.4B parameters)",parameters:"18.4B"},{id:"L3.2-8X4B",name:"Llama-3.2-8X4B",description:"Dark Champion Instruct V2 MOE (21B parameters)",parameters:"21B"}];function ChatPage(){let[e,t]=(0,r.useState)([]),[s,x]=(0,r.useState)(null),[p,f]=(0,r.useState)(""),[b,y]=(0,r.useState)(!1),[w,j]=(0,r.useState)(g[0]),[v,N]=(0,r.useState)(!1),[k,S]=(0,r.useState)(""),[C,M]=(0,r.useState)([]),D=(0,r.useRef)(null);(0,r.useEffect)(()=>{createNewChat()},[]),(0,r.useEffect)(()=>{if(""===k.trim())M(e);else{let t=e.filter(e=>e.title.toLowerCase().includes(k.toLowerCase())||e.messages.some(e=>e.content.toLowerCase().includes(k.toLowerCase())));M(t)}},[k,e]);let scrollToBottom=()=>{var e;null===(e=D.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{scrollToBottom()},[null==s?void 0:s.messages]);let createNewChat=()=>{if(s&&0===s.messages.length)return;let e={id:Date.now().toString(),title:"New Chat",messages:[],createdAt:new Date,lastMessage:new Date};t(t=>[e,...t]),x(e)},generateChatTitle=e=>{let t=e.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(e=>e.length>2),s=["the","and","for","are","but","not","you","all","can","had","her","was","one","our","out","day","get","has","him","his","how","man","new","now","old","see","two","way","who","boy","did","its","let","put","say","she","too","use"],a=t.filter(e=>!s.includes(e)),r=a.length>=5?a.slice(0,5):t.slice(0,5),n=r.map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return n||"New Chat"},updateSessionTitle=(e,a)=>{let r=generateChatTitle(a);t(t=>t.map(t=>t.id===e.id?{...t,title:r,lastMessage:new Date}:t)),(null==s?void 0:s.id)===e.id&&x(e=>e?{...e,title:r,lastMessage:new Date}:null)},selectSession=e=>{x(e)},regenerateLastMessage=async()=>{if(!s||s.messages.length<2)return;let e=s.messages,a=e[e.length-2];if("user"!==a.role)return;let r=e.slice(0,-1),n={...s,messages:r};x(n),t(e=>e.map(e=>e.id===s.id?n:e)),await generateResponse(a.content,r)},generateResponse=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];y(!0);try{console.log("Sending request to API:",{url:"".concat("https://api-text-generation.runpod.app","/chat"),data:{prompt:e,model:w.id,max_length:150,temperature:.7}});try{let r=await fetch("".concat("https://api-text-generation.runpod.app","/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,model:w.id,max_length:150,temperature:.7})});if(console.log("Response status:",r.status),r.ok){let e=await r.json();console.log("API Response:",e);let n={id:Date.now().toString(),content:e.output||e.response||e.generated_text||"Sorry, I couldn't generate a response.",role:"assistant",timestamp:new Date,model:w.id};if(s){let e=[...a.length>0?a:s.messages,n],r={...s,messages:e,lastMessage:new Date};x(r),t(e=>e.map(e=>e.id===s.id?r:e))}y(!1);return}}catch(e){console.log("API not available, using offline mode:",e)}console.log("Using simulated AI response"),await new Promise(e=>setTimeout(e,1e3+2e3*Math.random()));let r=["That's an interesting question about \"".concat(e,'". Let me think about this...'),"I understand you're asking about \"".concat(e,"\". Here's what I think:"),'Regarding "'.concat(e,'", I can share some insights:'),"That's a great topic! About \"".concat(e,'", here are my thoughts:'),'Thanks for your question about "'.concat(e,"\". Here's my perspective:")],n=["Based on my understanding, ","From what I know, ","In my analysis, ","Generally speaking, ","To answer your question, "],l=["this is a complex topic that involves multiple factors. The key considerations include user experience, technical implementation, and overall system design.","there are several approaches we could take. Each has its own advantages and potential challenges that we should carefully evaluate.","this requires a balanced approach that takes into account both current capabilities and future scalability needs.","the most effective solution would likely involve combining modern best practices with proven methodologies.","this is an area where careful planning and iterative development can lead to excellent results."],i=[" Would you like me to elaborate on any specific aspect?"," What are your thoughts on this approach?"," Is there a particular area you'd like to explore further?"," Does this help address your question?"," Let me know if you need more details on any part of this."],o=r[Math.floor(Math.random()*r.length)],c=n[Math.floor(Math.random()*n.length)]+l[Math.floor(Math.random()*l.length)],d=i[Math.floor(Math.random()*i.length)],m="".concat(o,"\n\n").concat(c).concat(d),h={id:Date.now().toString(),content:m,role:"assistant",timestamp:new Date,model:w.id};if(s){let e=[...a.length>0?a:s.messages,h],r={...s,messages:e,lastMessage:new Date};x(r),t(e=>e.map(e=>e.id===s.id?r:e))}}catch(a){console.error("Error generating response:",a);let e={id:Date.now().toString(),content:"Sorry, I encountered an error: ".concat(a instanceof Error?a.message:"Unknown error"),role:"assistant",timestamp:new Date};if(s){let a=[...s.messages,e],r={...s,messages:a};x(r),t(e=>e.map(e=>e.id===s.id?r:e))}}y(!1)},handleSendMessage=async()=>{if(!p.trim()||b||!s)return;let e={id:Date.now().toString(),content:p.trim(),role:"user",timestamp:new Date},a=[...s.messages,e],r={...s,messages:a};x(r),t(e=>e.map(e=>e.id===s.id?r:e)),0===s.messages.length&&updateSessionTitle(s,e.content),f(""),await generateResponse(e.content,a)};return(0,a.jsxs)("div",{className:"h-screen flex bg-white",children:[(0,a.jsxs)("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-black",children:"CHAT A.I+"})}),(0,a.jsx)("div",{className:"px-6 mb-6",children:(0,a.jsxs)("button",{onClick:createNewChat,className:"w-full flex items-center gap-3 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[(0,a.jsx)(n.Z,{size:18}),"New chat"]})}),(0,a.jsx)("div",{className:"px-6 mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Z,{size:18,className:"absolute left-3 top-3 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search conversations...",value:k,onChange:e=>S(e.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-6",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-3",children:"Your conversations"}),(0,a.jsx)("div",{className:"space-y-2",children:C.map(e=>(0,a.jsx)("button",{onClick:()=>selectSession(e),className:"w-full text-left p-3 rounded-lg transition-all duration-200 ".concat((null==s?void 0:s.id)===e.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50 border border-transparent"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(i.Z,{size:16,className:"text-gray-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.lastMessage.toLocaleDateString()})]})]})},e.id))})]}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>N(!v),className:"w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(o.Z,{size:18,className:"text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:w.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:w.parameters})]})]}),(0,a.jsx)(c.Z,{size:18,className:"text-gray-400"})]}),v&&(0,a.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white border border-gray-200 rounded-lg shadow-xl z-20",children:g.map(e=>(0,a.jsxs)("button",{onClick:()=>{j(e),N(!1)},className:"w-full text-left p-4 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg transition-colors",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col bg-white",children:[s&&s.messages.length>0&&(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:s.title}),s.messages.length>1&&(0,a.jsxs)("button",{onClick:regenerateLastMessage,disabled:b,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[(0,a.jsx)(d.Z,{size:16}),"Regenerate"]})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:s&&0!==s.messages.length?(0,a.jsxs)("div",{className:"p-6 space-y-6 max-w-4xl mx-auto w-full",children:[s.messages.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex gap-4 message-bubble ".concat("user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(o.Z,{size:16,className:"text-white"})}),(0,a.jsxs)("div",{className:"max-w-2xl p-4 rounded-2xl ".concat("user"===e.role?"bg-blue-600 text-white":"bg-white text-gray-900 border border-gray-200"),children:["user"===e.role?(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}):(0,a.jsx)(u.UG,{className:"prose prose-sm max-w-none prose-headings:text-gray-900 prose-p:text-gray-700",children:e.content}),(0,a.jsxs)("div",{className:"text-xs mt-3 ".concat("user"===e.role?"text-blue-100":"text-gray-500"),children:[e.timestamp.toLocaleTimeString(),e.model&&(0,a.jsxs)("span",{className:"ml-2",children:["• ",null===(t=g.find(t=>t.id===e.model))||void 0===t?void 0:t.name]})]})]}),"user"===e.role&&(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(m.Z,{size:16,className:"text-white"})})]},e.id)}),b&&(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(o.Z,{size:16,className:"text-white"})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-4 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),(0,a.jsx)("div",{ref:D})]}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto px-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-black rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(o.Z,{size:32,className:"text-white"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"What's in your mind?"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8 text-lg",children:"Start a conversation with our AI assistant. Ask questions, get help, or just chat!"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 bg-white p-4 rounded-lg border border-gray-200",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Model:"})," ",w.name]}),(0,a.jsx)("p",{children:w.description})]})]})})}),(0,a.jsx)("div",{className:"p-6 bg-white border-t border-gray-200",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{value:p,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSendMessage())},placeholder:"What's in your mind?",className:"w-full p-4 pr-14 border border-gray-200 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",rows:1,style:{minHeight:"56px",maxHeight:"160px"}}),(0,a.jsx)("button",{onClick:handleSendMessage,disabled:!p.trim()||b,className:"absolute right-2 bottom-2 p-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)(h.Z,{size:18})})]}),(0,a.jsxs)("div",{className:"mt-3 text-xs text-gray-500 text-center",children:["Using ",w.name," • Press Enter to send, Shift+Enter for new line"]})]})})]})]})}}},function(e){e.O(0,[781,971,472,744],function(){return e(e.s=1609)}),_N_E=e.O()}]);