(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1609:function(e,s,t){Promise.resolve().then(t.bind(t,5721))},5721:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ChatPage}});var a=t(7437),r=t(2265),l=t(5432),n=t(9409),i=t(3966),o=t(7972),d=t(6020),c=t(7393);let m=[{id:"L3.2-8X3B",name:"Llama 3.2 8X3B MOE",description:"Dark Champion Instruct (18.4B parameters)",parameters:"18.4B"},{id:"L3.2-8X4B",name:"Llama 3.2 8X4B MOE V2",description:"Dark Champion Instruct V2 (21B parameters)",parameters:"21B"}];function ChatPage(){let[e,s]=(0,r.useState)([]),[t,x]=(0,r.useState)(""),[h,u]=(0,r.useState)(!1),[g,p]=(0,r.useState)(m[0]),[f,b]=(0,r.useState)(!1),j=(0,r.useRef)(null),scrollToBottom=()=>{var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{scrollToBottom()},[e]);let handleSendMessage=async()=>{if(!t.trim()||h)return;let a={id:Date.now().toString(),content:t.trim(),role:"user",timestamp:new Date};s(e=>[...e,a]),x(""),u(!0);try{let t=await fetch("".concat("https://api-text-generation.runpod.app","/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a.content,model:g.id,history:e.slice(-10)})});if(!t.ok)throw Error("Failed to get response");let r=await t.json(),l={id:(Date.now()+1).toString(),content:r.response,role:"assistant",timestamp:new Date,model:g.id};s(e=>[...e,l])}catch(t){console.error("Error:",t);let e={id:(Date.now()+1).toString(),content:"抱歉，发生了错误。请稍后再试。",role:"assistant",timestamp:new Date};s(s=>[...s,e])}u(!1)};return(0,a.jsxs)("div",{className:"chat-container flex",children:[(0,a.jsxs)("div",{className:"w-64 bg-chat-sidebar border-r border-gray-200 flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-800",children:"AI Chat"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Powered by Llama 3.2"})]}),(0,a.jsx)("div",{className:"flex-1 p-4",children:(0,a.jsxs)("button",{onClick:()=>{s([])},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:[(0,a.jsx)(l.Z,{size:16}),"New Chat"]})}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,a.jsxs)("button",{onClick:()=>b(!f),className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:[(0,a.jsx)(n.Z,{size:16}),"Settings"]}),f&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),(0,a.jsx)("select",{value:g.id,onChange:e=>p(m.find(s=>s.id===e.target.value)||m[0]),className:"w-full p-2 border border-gray-300 rounded-md text-sm",children:m.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.parameters,")"]},e.id))}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:g.description})]})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===e.length?(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)(i.Z,{size:48,className:"mx-auto mb-4 text-gray-400"}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Welcome to AI Chat"}),(0,a.jsx)("p",{children:"Start a conversation with our advanced Llama 3.2 models"}),(0,a.jsxs)("div",{className:"mt-4 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Current Model:"})," ",g.name]}),(0,a.jsx)("p",{className:"text-gray-400",children:g.description})]})]})}):e.map(e=>{var s;return(0,a.jsxs)("div",{className:"message-bubble flex gap-3 ".concat("user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(i.Z,{size:16,className:"text-white"})}),(0,a.jsxs)("div",{className:"max-w-3xl p-4 rounded-lg ".concat("user"===e.role?"bg-blue-500 text-white":"bg-white border border-gray-200"),children:["user"===e.role?(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}):(0,a.jsx)(c.UG,{className:"prose prose-sm max-w-none",children:e.content}),(0,a.jsxs)("div",{className:"text-xs mt-2 ".concat("user"===e.role?"text-blue-100":"text-gray-500"),children:[e.timestamp.toLocaleTimeString(),e.model&&(0,a.jsxs)("span",{className:"ml-2",children:["• ",null===(s=m.find(s=>s.id===e.model))||void 0===s?void 0:s.name]})]})]}),"user"===e.role&&(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(o.Z,{size:16,className:"text-white"})})]},e.id)}),h&&(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(i.Z,{size:16,className:"text-white"})}),(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),(0,a.jsx)("div",{ref:j})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("textarea",{value:t,onChange:e=>x(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSendMessage())},placeholder:"Type your message...",className:"flex-1 p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:1,style:{minHeight:"44px",maxHeight:"120px"}}),(0,a.jsx)("button",{onClick:handleSendMessage,disabled:!t.trim()||h,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:(0,a.jsx)(d.Z,{size:18})})]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500 text-center",children:["Using ",g.name," • Press Enter to send, Shift+Enter for new line"]})]})]})]})}}},function(e){e.O(0,[689,971,472,744],function(){return e(e.s=1609)}),_N_E=e.O()}]);